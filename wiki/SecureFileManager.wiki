#summary How to install and use the SecureFileManager.

= Introduction =

The SecureFileManager is a filemanager for the android platform, which is making use of the G&D secure microSD card, in order to cipher files.<br/>
To spare the user to keep numerous complicated passwords, which are being used for ciphering, in mind, a secure key is being generated and saved, by the use of the Java Card Applet, which is running on the Mobile Security Card.<br/><br/>


= Android Application =

*The Android Application is for demonstration and test purposes only. Do not use in production environments!*<br/>

To use this application, you need a Android platform with smart card access.<br/>
For this purpose look [http://code.google.com/p/seek-for-android/wiki/BuildingTheSystem BuildingTheSystem] or the introduction on the [https://www.cardsolutions-shop.com/shop/gi-de/ Mobile Security Developer's Kit].<br/>

Checkout the [http://code.google.com/p/seek-for-android/source/browse/#svn/trunk/applications/SecureFileManager/SecurityFileManager SecureFileManger source code] and install your own generated .apk file on your Android device.<br/>
Run the SecureFileManager application on your Android smartphone.
<br/><br/>
With inserted Mobile Security Card the encryption functions are available.<br/><br/>

<table>
<tr>
<td style="margin-right:10px;">http://seek-for-android.googlecode.com/svn/wiki/img/secureFileManager_encrypt_menu.png</td>
<td>http://seek-for-android.googlecode.com/svn/wiki/img/secureFileManager_encrypt_file.png</td>
</tr>
</table>
<br/><br/><br/>
= Java Card Applet =

*The Java Card applet is for demonstration and test purposes only. Do not use in production environments!*<br/>

Download the filemanager.cap file from the [http://code.google.com/p/seek-for-android/source/browse/#svn/trunk/applications/SecureFileManager/JavaCardApplet/com/gieseckedevrient/javacard/filemanager/javacard Download page].<br/>
Install the filemanager.cap file on the Mobile Security Card. Therfore you can use JLoad or other Java Card compliant Global Platform loader tools.<br/>
JLoad is included in the [https://www.cardsolutions-shop.com/shop/gi-de/ Mobile Security Developer's Kit].<br/>
You can even compile and convert the [http://code.google.com/p/seek-for-android/source/browse/#svn/trunk/applications/SecureFileManager/JavaCardApplet/com/gieseckedevrient/javacard/filemanager%3Fstate%3Dclosed fileManager.java] file to a Java Card Cap file. For this reason please check the [http://code.google.com/p/seek-for-android/source/browse/#svn/trunk/applications/SecureFileManager/JavaCardApplet source code page].<br/><br/>

With the help of the Java Card Applet a secure key is being established for a specific file-ID and a given password.
This triple is saved on the secure element of the Mobile Security Card.<br/><br/>

http://seek-for-android.googlecode.com/svn/wiki/img/secureFileManager_triple.png

Only if you are authenticated you have access to all methods. The default Pin is 0x31 0x32 0x33 0x34.<br/>
After 3 times wrong pin entry the applet is blocked. A correct Pin resets the counter.

== APDU Interface ==
=== Verify Pin ===
{{{
CLA:  90
INS:  10
P1:   00
P2:   00
P3:   04
data: <4 bytes pin>

APDU: 90 10 00 00 04 31 32 33 34
RESPONSE: 90 00
}}}

=== Create Key ===
{{{
CLA:  90
INS:  20
P1:   00
P2:   00
P3:   <length of data>
data: <length of file-ID><file-ID><length of pwd><pwd>

APDU: 90 20 00 00 10 04 2F 02 38 3B 0A 31 32 33 34 35 36 37 38 39 40
RESPONSE: <key> 90 00
}}}

=== Verify Key ===
{{{
CLA:  90
INS:  30
P1:   00
P2:   00
P3:   <length of data>
data: <length of file-ID><file-ID><length of pwd><pwd>

APDU: 90 30 00 00 10 04 2F 02 38 3B 0A 31 32 33 34 35 36 37 38 39 40
RESPONSE: <key> 90 00
}}}

=== Delete Key ===
{{{
CLA:  90
INS:  40
P1:   00
P2:   00
P3:   <length of data>
data: <length of file-ID><file-ID><length of pwd><pwd>

APDU: 90 30 00 00 10 04 2F 02 38 3B 0A 31 32 33 34 35 36 37 38 39 40
RESPONSE: 90 00
}}}